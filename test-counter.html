<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Counter Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 50px;
            background: #1a1a2e;
            color: white;
        }

        .stat-number {
            font-size: 48px;
            font-weight: bold;
            color: #00d4ff;
        }

        .stat-suffix {
            font-size: 36px;
            color: #00d4ff;
        }
    </style>
</head>

<body>
    <h1>Counter Animation Test</h1>

    <div>
        <span class="stat-number" data-target="1">0</span>
        <span class="stat-suffix">B+</span>
    </div>

    <div>
        <span class="stat-number" data-target="500">0</span>
        <span class="stat-suffix">+</span>
    </div>

    <div>
        <span class="stat-number" data-target="24">0</span>
        <span class="stat-suffix">/7</span>
    </div>

    <script>
        console.log('Script loaded');

        document.addEventListener('DOMContentLoaded', function () {
            console.log('DOM loaded');
            initializeCounterAnimations();
        });

        function initializeCounterAnimations() {
            const counters = document.querySelectorAll('.stat-number[data-target]');

            console.log('Found counters:', counters.length);
            console.log('Counters:', counters);

            if (counters.length === 0) {
                console.warn('No stat counters found!');
                return;
            }

            // Start animation after a short delay to ensure page is loaded
            setTimeout(() => {
                counters.forEach((counter, index) => {
                    console.log(`Counter ${index}: target=${counter.dataset.target}`);
                    // Add staggered delay for each counter
                    setTimeout(() => {
                        animateCounter(counter);
                    }, index * 100);
                });
            }, 800);
        }

        function animateCounter(element) {
            console.log('Animating:', element, 'Target:', element.dataset.target);
            const target = parseInt(element.dataset.target);

            if (isNaN(target)) {
                console.error('Invalid target:', element.dataset.target);
                return;
            }

            console.log('Starting animation to:', target);

            const duration = 2000;
            const start = performance.now();

            function updateCounter(currentTime) {
                const elapsed = currentTime - start;
                const progress = Math.min(elapsed / duration, 1);

                // Easing function for smooth animation
                const easeOutQuart = 1 - Math.pow(1 - progress, 4);
                const current = Math.floor(target * easeOutQuart);

                // Update the counter text
                element.textContent = current;

                if (progress < 1) {
                    requestAnimationFrame(updateCounter);
                } else {
                    // Ensure we end at the exact target
                    element.textContent = target;
                    console.log('Animation complete:', target);
                }
            }

            requestAnimationFrame(updateCounter);
        }
    </script>
</body>

</html>